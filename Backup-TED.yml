---
- name: Backup TEDs
  hosts: TED
  gather_facts: yes
  collections:
   - fortinet.fortios
   
  connection: httpapi
  vars:
   vdom: "root"
   ansible_httpapi_use_ssl: yes
   ansible_httpapi_validate_certs: no
   ansible_httpapi_port: 443
   
  tasks:
  - name: Backup?
    fortios_monitor:
     selector: 'backup.system.config'
     vdom: 'root'
     params:
         scope: 'global'
    register: backupinfo

 # - name: Save the backup information.
 #   copy:
 #    content: '{{ backupinfo.meta.raw }}'
 #    dest: './local.backup'

  - name: display output.
    ansible.builtin.debug:
      var: result
      verbosity: 2
